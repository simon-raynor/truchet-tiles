:root {
    font-size: 12px;
}

html,
body {
    margin: 0;
    padding: 0;

    height: 100vh;
    width: 100vw;

    overflow: hidden;

    --size: 36px;
}
#stage {
    /* 
    --colorOne: deepskyblue;
    --colorTwo: deeppink;
    --linewidthOne: 0.125em;
    --linecolorOne: black;
    --linewidthTwo: 0.25em;
    --linecolorTwo: white;
    --linewidthThree: 0.125em;
    --linecolorThree: black; */

    /* leave space for up to two extra per row (will be hidden by overflow) */
    width: calc(100vw + var(--size) + var(--size));

    /* force an odd number of columns so :nth-child plays nice */
    grid-template-columns: var(--size) repeat(auto-fit, var(--size) var(--size));

    display: grid;

    background: var(--colorOne);
    /* offset checkerboard background to make the spins look better */
    /* background: repeating-conic-gradient(var(--colorTwo) 0 25%, #0000 0 50%) 50% / 6em 6em
        , var(--colorOne);
    background-position-x: 1.5em; */
}


.tile {
    --step1: calc((var(--size) / 2) - (var(--linewidthA) / 2) - (var(--linewidthB) / 2) - (var(--linewidthC) / 2));
    --step2: calc(var(--step1) + var(--linewidthA));
    --step3: calc(var(--step2) + var(--linewidthB));
    --step4: calc(var(--step3) + var(--linewidthC));

    --corner-steps: var(--colorA)
        , var(--colorA) var(--step1)
        , var(--linecolorA) var(--step1)
        , var(--linecolorA) var(--step2)
        , var(--linecolorB) var(--step2)
        , var(--linecolorB) var(--step3)
        , var(--linecolorC) var(--step3)
        , var(--linecolorC) var(--step4)
        , transparent var(--step4);
    
    font-size: var(--size);

    height: var(--size);
    width: var(--size);

    background-size: var(--size);
    background: radial-gradient(circle at 0 0, var(--corner-steps))
        , radial-gradient(circle at 100% 100%, var(--corner-steps))
        , var(--colorB);

    transform: rotate(calc(var(--angle) * 1deg));

    transition: transform 0.25s;

    position: relative;
}

.tile.fork {
    background: radial-gradient(circle at 0 0
            , var(--colorA)
            , var(--colorA) var(--step1)
            , var(--linecolorA) var(--step1)
            , var(--linecolorA) var(--step2)
            , var(--linecolorB) var(--step2)
            , var(--linecolorB) var(--step3)
            , var(--linecolorC) var(--step3)
            , var(--linecolorC) var(--step4)
            , transparent var(--step4)
        )
        , radial-gradient(circle at 100% 0
            , var(--colorB)
            , var(--colorB) var(--step1)
            , var(--linecolorC) var(--step1)
            , var(--linecolorC) calc(var(--step1) + var(--linewidthC))
            , var(--linecolorB) calc(var(--step1) + var(--linewidthC))
            , var(--linecolorB) calc(var(--step1) + var(--linewidthB) + var(--linewidthC))
            , var(--linecolorA) calc(var(--step1) + var(--linewidthB) + var(--linewidthC))
            , var(--linecolorA) calc(var(--step1) + var(--linewidthA) + var(--linewidthB) + var(--linewidthC))
            , transparent calc(var(--step1) + var(--linewidthA) + var(--linewidthB) + var(--linewidthC))
        )
        , linear-gradient(to left
            , var(--colorA)
            , var(--colorA) var(--step1)
            , var(--linecolorA) var(--step1)
            , var(--linecolorA) var(--step2)
            , var(--linecolorB) var(--step2)
            , var(--linecolorB) var(--step3)
            , var(--linecolorC) var(--step3)
            , var(--linecolorC) var(--step4)
            , transparent var(--step4)
        )
        , var(--colorB);
}

.tile.a,
.tile.b:nth-child(2n) {
    --colorA: var(--colorOne);
    --colorB: var(--colorTwo);

    --linecolorA: var(--linecolorOne);
    --linecolorB: var(--linecolorTwo);
    --linecolorC: var(--linecolorThree);
    --linewidthA: var(--linewidthOne);
    --linewidthB: var(--linewidthTwo);
    --linewidthC: var(--linewidthThree);
}

.tile.b,
.tile.a:nth-child(2n) {
    --colorA: var(--colorTwo);
    --colorB: var(--colorOne);

    --linecolorA: var(--linecolorThree);
    --linecolorB: var(--linecolorTwo);
    --linecolorC: var(--linecolorOne);
    --linewidthA: var(--linewidthThree);
    --linewidthB: var(--linewidthTwo);
    --linewidthC: var(--linewidthOne);
;
}

#controls {
    position: absolute;
    top: 1em;
    left: 1em;
    right: 1em;

    display: grid;
    grid-template-columns: max-content 1fr;
    gap: .75em;
    align-items: start;

    pointer-events: none;

    font-family: monospace;
    font-weight: bold;
}

#presets {
    display: flex;
    flex-direction: row-reverse;
    flex-wrap: wrap;
    gap: .75em;
}

details,
button {
    background: #112b;
    backdrop-filter: blur(.25em);
    color: #ffd;
    border-radius: .333em;

    pointer-events: all;
}

details {
    width: max-content;

    max-height: calc(100vh - 3.5em);
    overflow: auto;
}

summary {
    line-height: 2em;
    padding: .75em 1.5em;
}

button {
    border: none;
    padding: .25em;
}
button .tile {
    --size: 36px;
}

form {
    display: flex;
    flex-direction: column;
    gap: 1.25em;
    padding: 0 .75em 1.5em;
}

label {
    display: flex;
    flex-direction: column;
    gap: .25em;
}